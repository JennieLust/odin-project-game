<!DOCTYPE html>
<html lang="en-US">


<head>
	<meta charset="UTF-8"> 
	<title>JavaScript Game</title>
	

</head>

<body>

	<script>
		/*init body*/
		const body = document.querySelector('body');
		body.style.backgroundColor = "brown"

		/*header*/
		const header = document.createElement("h1");
		header.style.color = "white";
		header.innerText = "ROCK PAPER SCISSORS \n five round game"
		header.style.fontFamily = "century gothic"
		header.style.textAlign = "center";
		header.style.paddingTop = "20px"

		/*make button div*/
		const btnDiv = document.createElement("div");
		btnDiv.style.textAlign = "center";
		btnDiv.style.paddingTop = "10px";

		/* make three buttons for each selection */ 
		const btnRock = document.createElement("button");
		btnRock.innerText = "Rock";
		btnRock.style.backgroundColor = "CadetBlue";
		btnRock.style.color = "white"
		btnRock.style.width = "120px"
		btnRock.style.border = "none";
		btnRock.style.padding = "10px 15px 10px 15px";
		btnRock.style.fontSize = "20px"
		btnRock.style.margin = "10px"
		btnRock.style.borderRadius = "5px"
		btnRock.style.boxShadow = "0 6px 14px 0 rgba(0,0,0,0.2), 0 4px 18px 0 rgba(0,0,0,0.19)"

		const btnPaper = document.createElement("button");
		btnPaper.innerText = "Paper";
		btnPaper.style.backgroundColor = "CadetBlue";
		btnPaper.style.color = "white";
		btnPaper.style.border = "none";
		btnPaper.style.padding = "10px 15px 10px 15px";
		btnPaper.style.fontSize = "20px"
		btnPaper.style.margin = "10px"
		btnPaper.style.borderRadius = "5px"
		btnPaper.style.boxShadow = "0 6px 14px 0 rgba(0,0,0,0.2), 0 4px 18px 0 rgba(0,0,0,0.19)"
		btnPaper.style.width = "120px"

		const btnScissors = document.createElement("button");
		btnScissors.innerText = "Scissors";
		btnScissors.style.backgroundColor = "CadetBlue";
		btnScissors.style.border = "none";
		btnScissors.style.color = "white";
		btnScissors.style.padding = "10px 15px 10px 15px";
		btnScissors.style.fontSize = "20px"
		btnScissors.style.margin = "10px"
		btnScissors.style.borderRadius = "5px"
		btnScissors.style.boxShadow = "0 6px 14px 0 rgba(0,0,0,0.2), 0 4px 18px 0 rgba(0,0,0,0.19)"
		btnScissors.style.width = "120px"

		/* How do I get this to update/be called again when the values change??*/
		/* Plus display each round in text? */
		var playerSelection = "";
		var playerScore = 0;
		var computerScore = 0;
		var round = 0;

		const resDiv = document.createElement("div");
		resDiv.style.textAlign = "center"
		resDiv.style.fontFamily = "century gothic";
		resDiv.style.color = "white";
		resDiv.style.fontSize = "26px";

		const resPar = document.createElement("p");
		resPar.innerText = 'Score: ' + playerScore + " - " + computerScore;
		resPar.style.fontSize = "22px";
		const resRound = document.createElement("p");
		resRound.innerText = "Round " + round;
		const resWinner = document.createElement("p");

		resWinner.style.color = "yellow";
		resWinner.style.fontSize = "30px"

		/*event listernets, assign playerSelection and run one round*/
		btnRock.addEventListener('click', () => {
			playerSelection = "Rock";
			console.log(playRound(computerSelection, playerSelection))
			resPar.innerText = 'Score: ' + playerScore + " - " + computerScore;
			resRound.innerText = "Round " + round;
			if (round >= 5) {
			btnRock.disabled = true;
			btnPaper.disabled = true;
			btnScissors.disabled = true;
			if (playerScore > computerScore) {
				resWinner.innerText = "You won!"
			} else if (playerScore < computerScore) {
				resWinner.innerText = "Computer won!"
			} else {
				resWinner.innerText = "It's a draw!"
			}
		};

		});
		btnPaper.addEventListener('click', () => {
			playerSelection = "Paper";
			console.log(playRound(computerSelection, playerSelection));
			resPar.innerText = 'Score: ' + playerScore + " - " + computerScore;
			resRound.innerText = "Round " + round;
			if (round >= 5) {
			btnRock.disabled = true;
			btnPaper.disabled = true;
			btnScissors.disabled = true;
			if (playerScore > computerScore) {
				resWinner.innerText = "You won!"
			} else if (playerScore < computerScore) {
				resWinner.innerText = "Computer won!"
			} else {
				resWinner.innerText = "It's a draw!"
			}
		};
		});
		btnScissors.addEventListener('click', () => {
			playerSelection = "Scissors";
			console.log(playRound(computerSelection, playerSelection));
			resPar.innerText = 'Score: ' + playerScore + " - " + computerScore;
			resRound.innerText = "Round " + round;
			if (round >= 5) {
			btnRock.disabled = true;
			btnPaper.disabled = true;
			btnScissors.disabled = true;
			if (playerScore > computerScore) {
				resWinner.innerText = "You won!"
			} else if (playerScore < computerScore) {
				resWinner.innerText = "Computer won!"
			} else {
				resWinner.innerText = "It's a draw!"
			}
		};
		})

		const items = ['Rock', 'Paper', 'Scissors'];
		
		/* returns a random move from items array */
		function computerPlay() {
			return items[Math.floor(Math.random()*items.length)];			
		};
		
		/* plays a single round and returns a string */
		function playRound(computerSelection, playerSelection) {
			computerSelection = computerPlay();
			round = round + 1;
			switch (true) {
				case (computerSelection === items[0] && playerSelection === items[2]):
					playerScore = playerScore + 0;
					computerScore = computerScore + 1;
					return "You lose! " + playerSelection + " beats " + computerSelection; 
					break;
				case (computerSelection === items[0] && playerSelection === items[1]):
					playerScore = playerScore + 1;
					computerScore = computerScore + 0;
					return "You win! " + computerSelection + " beats " + playerSelection;
					break;
				case (computerSelection === items[2] && playerSelection === items[0]):
					playerScore = playerScore + 1;
					computerScore = computerScore + 0;
					return "You win! " + playerSelection + " beats " + computerSelection;
					break;
				case (computerSelection === items[2] && playerSelection === items[1]):
					playerScore = playerScore + 0;
					computerScore = computerScore + 1;
					return "You lose! " + computerSelection + " beats " + playerSelection;
					break;
				case (computerSelection === items[1] && playerSelection === items[0]):
					playerScore = playerScore + 0;
					computerScore = computerScore + 1;
					return "You lose! " + playerSelection + " beats " + computerSelection;
					break;
				case (computerSelection === items[1] && playerSelection === items[2]):
					playerScore = playerScore + 0;
					computerScore = computerScore + 1;
					return "You lose! " + computerSelection + " beats " + playerSelection;
					break;	
				default: 
					playerScore = playerScore + 0;
					computerScore = computerScore + 0;
					return "Draw. " + computerSelection + " neither beats nor loses to " + playerSelection;
			};
		};


		
		/* plays 5 rounds
		function game() {
			let computerScore = 0;
			let playerScore = 0;
			
			  loops 5 rounds, logs the rounds and applies scores based on playRound result string
			for (let i = 0; i < 5; i++) {
				let playerSelection = promptPlayer();
				let currentRound = playRound(computerSelection, playerSelection);
				 logs each round 
				console.log("Round " + (i + 1) + ": " + currentRound)
				if (currentRound.includes("You win!")) {
					playerScore++;
				} else if (currentRound.includes("You lose!")) {
					computerScore++;
				};
			};
			
			 logs the results of the game based on score
			if (computerScore > playerScore) {
				console.log("You lose! You: " + playerScore + " Computer: " + computerScore);			
			} else if (computerScore < playerScore) {
				console.log("You win! You: " + playerScore + " Computer: " + computerScore);			
			} else {
				console.log("Draw. You: " + playerScore + " Computer: " + computerScore);			
			};
		}; */
		


		/* returns valid player moves based on case-insensitive regex
		function promptPlayer() {
			while(true) {
				var playerSelection = prompt("Choose your move. Rock, paper or scissors?");
				switch (true){
					case /rock/i.test(playerSelection):
						return "Rock";
						break;
					case /paper/i.test(playerSelection):
						return "Paper";
						break;
					case /scissors/i.test(playerSelection):
						return "Scissors";
						break;
					forces player to keep entering value until valid input
					default:
						alert("Not a valid move. Try again:")	
				};
			};
		};*/
		
		const computerSelection = computerPlay();
		/*game();*/

		/*appends to DOM*/
		body.appendChild(header);
		body.appendChild(btnDiv)
		btnDiv.appendChild(btnPaper);
		btnDiv.appendChild(btnRock);
		btnDiv.appendChild(btnScissors);
		body.appendChild(resDiv);
		resDiv.appendChild(resRound);
		resDiv.appendChild(resPar)
		resDiv.appendChild(resWinner);


	</script>	
</body>



</html>